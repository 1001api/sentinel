(()=>{function c(e){return e?.map(t=>new Date(t.Timestamp).toDateString())??[]}function n(e){return e?.map(t=>t.Total)??[]}var d=1e4,a=document.getElementById("project-id")?.textContent,f=a?JSON.parse(a):null,s=document.getElementById("weekly-events")?.textContent,r=s?JSON.parse(s):[],h=c(r),p=n(r),o=document.getElementById("weekly-event-total"),y={chart:{height:"300px",maxWidth:"100%",type:"area",dropShadow:{enabled:!0},toolbar:{show:!1},animations:{enabled:!1},zoom:{enabled:!1}},tooltip:{enabled:!0,x:{show:!0}},fill:{type:"gradient",gradient:{opacityFrom:.55,opacityTo:0,shade:"#1C64F2",gradientToColors:["#1C64F2"]}},dataLabels:{enabled:!1,style:{fontFamily:"Space Grotesk"}},stroke:{width:6},grid:{show:!1,strokeDashArray:4,padding:{left:2,right:2,top:0}},series:[{name:"Events",data:p,color:"#1A56DB"}],xaxis:{categories:h,labels:{show:!1},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{show:!1}},m={series:[52.8,26.8,20.4],colors:["#1C64F2","#16BDCA","#9061F9"],chart:{height:"300px",width:"100%",type:"pie",animations:{enabled:!1}},stroke:{colors:["white"],lineCap:""},plotOptions:{pie:{labels:{show:!0},size:"100%",dataLabels:{offset:-25}}},labels:["Direct","Organic search","Referrals"],dataLabels:{enabled:!0,style:{fontFamily:"Space Grotesk"}},legend:{position:"bottom",fontFamily:"Inter, sans-serif"},yaxis:{labels:{formatter:function(e){return e+"%"}}},xaxis:{labels:{formatter:function(e){return e+"%"}},axisTicks:{show:!1},axisBorder:{show:!1}}},u={colors:["#1A56DB","#FDBA8C"],series:[{name:"Organic",color:"#1A56DB",data:[{x:"Mon",y:231},{x:"Tue",y:122},{x:"Wed",y:63},{x:"Thu",y:421},{x:"Fri",y:122},{x:"Sat",y:323},{x:"Sun",y:111}]}],chart:{type:"bar",height:"300px",fontFamily:"Inter, sans-serif",toolbar:{show:!1},animations:{enabled:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"70%",borderRadiusApplication:"end",borderRadius:8}},tooltip:{shared:!0,intersect:!1,style:{fontFamily:"Inter, sans-serif"}},states:{hover:{filter:{type:"darken",value:1}}},stroke:{show:!0,width:0,colors:["transparent"]},grid:{show:!1,strokeDashArray:4,padding:{left:2,right:2,top:-14}},dataLabels:{enabled:!1},legend:{show:!1},xaxis:{floating:!1,labels:{show:!0,style:{fontFamily:"Inter, sans-serif",cssClass:"text-xs font-normal fill-gray-500 dark:fill-gray-400"}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{show:!1},fill:{opacity:1}},l=new ApexCharts(document.getElementById("area-chart"),y),w=new ApexCharts(document.getElementById("pie-chart"),m),x=new ApexCharts(document.getElementById("column-chart"),u);l.render();w.render();x.render();setInterval(function(){g(l)},d);function g(e){$.ajax({url:`/api/json/event/chart/${f}`,type:"GET",success:function(t){let i=n(t.Time);o&&(o.innerText=t.Total??0),e.updateSeries([{name:"Events",data:i,color:"#1A56DB"}])},error:function(){console.log("Error fetching new chart data")}})}})();
