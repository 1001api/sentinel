(()=>{function m(t){return t?.map(e=>new Date(e.Timestamp).toDateString())??[]}function s(t){return t?.map(e=>e.Total)??[]}function c(t){return t?.map(e=>e.EventType)??[]}var w=1e4,o=document.getElementById("project-id")?.textContent,d=o?JSON.parse(o):null,r=document.getElementById("weekly-events")?.textContent,p=r?JSON.parse(r):[],l=document.getElementById("event-type-chart")?.textContent,h=l?JSON.parse(l):[],x=m(p),g=s(p),b=c(h),E=s(h),i=document.getElementById("weekly-event-total"),T={chart:{height:"300px",maxWidth:"100%",type:"area",dropShadow:{enabled:!0},toolbar:{show:!1},animations:{enabled:!1},zoom:{enabled:!1}},tooltip:{enabled:!0,x:{show:!0}},fill:{type:"gradient",gradient:{opacityFrom:.55,opacityTo:0,shade:"#1C64F2",gradientToColors:["#1C64F2"]}},dataLabels:{enabled:!1,style:{fontFamily:"Space Grotesk"}},stroke:{width:6},grid:{show:!1,strokeDashArray:4,padding:{left:2,right:2,top:0}},series:[{name:"Events",data:g,color:"#1A56DB"}],xaxis:{categories:x,labels:{show:!1},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{show:!1}},a={series:E,chart:{height:"380px",width:"100%",type:"pie",animations:{enabled:!1}},stroke:{colors:["white"],lineCap:""},plotOptions:{pie:{labels:{show:!0},size:"100%",dataLabels:{offset:-25}}},labels:b,dataLabels:{enabled:!0,style:{fontFamily:"Space Grotesk"}},legend:{position:"bottom",fontFamily:"Space Grotesk, sans-serif"},xaxis:{axisTicks:{show:!0},axisBorder:{show:!0}}},v={colors:["#1A56DB","#FDBA8C"],series:[{name:"Organic",color:"#1A56DB",data:[{x:"Mon",y:231},{x:"Tue",y:122},{x:"Wed",y:63},{x:"Thu",y:421},{x:"Fri",y:122},{x:"Sat",y:323},{x:"Sun",y:111}]}],chart:{type:"bar",height:"300px",fontFamily:"Inter, sans-serif",toolbar:{show:!1},animations:{enabled:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"70%",borderRadiusApplication:"end",borderRadius:8}},tooltip:{shared:!0,intersect:!1,style:{fontFamily:"Inter, sans-serif"}},states:{hover:{filter:{type:"darken",value:1}}},stroke:{show:!0,width:0,colors:["transparent"]},grid:{show:!1,strokeDashArray:4,padding:{left:2,right:2,top:-14}},dataLabels:{enabled:!1},legend:{show:!1},xaxis:{floating:!1,labels:{show:!0,style:{fontFamily:"Inter, sans-serif",cssClass:"text-xs font-normal fill-gray-500 dark:fill-gray-400"}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{show:!1},fill:{opacity:1}},y=new ApexCharts(document.getElementById("area-chart"),T),f=new ApexCharts(document.getElementById("pie-chart"),a),k=new ApexCharts(document.getElementById("column-chart"),v);y.render();f.render();k.render();setInterval(function(){Promise.allSettled([C(y),B(f)])},w);function C(t){$.ajax({url:`/api/json/event/chart/${d}`,type:"GET",success:function(e){let n=s(e.Time);i&&(i.innerText=e.Total??0),t.updateSeries([{name:"Events",data:n,color:"#1A56DB"}])},error:function(){console.log("Error fetching new chart data")}})}function B(t){$.ajax({url:`/api/json/event-type/chart/${d}`,type:"GET",success:function(e){let n=s(e),u=c(e);a.labels=u,a.series=n,t.updateOptions(a)},error:function(){console.log("Error fetching new chart data")}})}})();
